<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #F8F8F8;
}
.sc0 {
}
.sc1 {
	color: #1E9AE0;
}
.sc2 {
	color: #1E9AE0;
}
.sc4 {
	color: #FF3A83;
}
.sc5 {
	color: #F6F080;
}
.sc6 {
	color: #55E439;
}
.sc7 {
	color: #55E439;
}
.sc9 {
	color: #FFAA00;
}
.sc10 {
	color: #FFAA00;
}
.sc11 {
}
.sc16 {
	color: #FFAA00;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #0B161D; "><span class="sc1">/* 
 * Copyright (c) The Gupta Empire - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 *
 * Written by Aryan Gupta &lt;me@theguptaempire.net&gt;, February 2017
 * 
 * =============================================================================
 * @author Aryan Gupta
 * @project Prime Map
 * @title Prime Map
 * @date 2017-02-11 (YYYY-MM-DD)
 * @fversion 3.5.1
 * @description Finds prime numbers and outputs a bitmap displaying the primes
 * =============================================================================
 */</span><span class="sc0">
</span><span class="sc9">#include "info.h"
#define _PRINTINFO std::cout &lt;&lt; '\n' &lt;&lt; R_PROJNAME &lt;&lt; " v" &lt;&lt; R_PVERSION &lt;&lt; " by " &lt;&lt; R_AUTHOR &lt;&lt; '\n' &lt;&lt; R_COPYRIGHT &lt;&lt; '\n' &lt;&lt; R_COMMENTS &lt;&lt; "\n\n\n" </span><span class="sc2">// Legal and Informational
</span><span class="sc0">
</span><span class="sc9">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;chrono&gt;
#include &lt;cmath&gt;
#include &lt;sstream&gt;
#include &lt;string.h&gt;
</span><span class="sc0">
</span><span class="sc9">#if (defined (LINUX) || defined (__linux__)) </span><span class="sc2">// if we are compiling on a linux kernel
</span><span class="sc0">    </span><span class="sc9">#include &lt;thread&gt;
</span><span class="sc0">    </span><span class="sc9">#include &lt;mutex&gt;
#elif (defined (_WIN32) || defined (_WIN64)) </span><span class="sc2">// if we are compiling on a windows/NT kernel
</span><span class="sc0">    </span><span class="sc9">#include ".\threadh\mingw.thread.h"
</span><span class="sc0">    </span><span class="sc9">#include ".\threadh\mingw.mutex.h"
#endif
</span><span class="sc0">
</span><span class="sc9">#include "PrimeMap.h"
</span><span class="sc0">
</span><span class="sc5">typedef</span><span class="sc0"> </span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">long</span><span class="sc0"> </span><span class="sc16">long</span><span class="sc0"> </span><span class="sc11">ull</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">NUM_OF_THREADS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// stores the number of threads to be used to calculate the primes
</span><span class="sc0">
</span><span class="sc16">const</span><span class="sc0"> </span><span class="sc16">long</span><span class="sc0"> </span><span class="sc11">START</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// start of primes
</span><span class="sc11">ull</span><span class="sc0"> </span><span class="sc11">END</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">10000</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// where to end when looking for primes
</span><span class="sc0">
</span><span class="sc16">bool</span><span class="sc0"> </span><span class="sc11">outputBitMap</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// should we output a bitmap?
</span><span class="sc16">bool</span><span class="sc0"> </span><span class="sc11">display</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// should we display the bitmap?
</span><span class="sc16">bool</span><span class="sc0"> </span><span class="sc11">RGBColor</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// does the user want to change the color of the bit map?
</span><span class="sc0">
</span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">mutex</span><span class="sc0"> </span><span class="sc11">testing</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// mutex used when pulling a tested number from the number pool
</span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">mutex</span><span class="sc0"> </span><span class="sc11">found</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// mutex used when a prime is found and saving it to the found primes list
</span><span class="sc0">
</span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">vector</span><span class="sc10">&lt;</span><span class="sc16">bool</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">foundPrimes</span><span class="sc10">(</span><span class="sc11">END</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// stores all the foud primes | 0 for nit prime, 1 for prime
</span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">vector</span><span class="sc10">&lt;</span><span class="sc11">ull</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">testedPrimes</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">START</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// stores the numbers that have been tested
</span><span class="sc11">ull</span><span class="sc0"> </span><span class="sc11">numOfPrimes</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// stores the number of primes found
</span><span class="sc0">
</span><span class="sc16">long</span><span class="sc0"> </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// stores the color of the primes on the bitmap
</span><span class="sc16">long</span><span class="sc0"> </span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc4">254</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">254</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">254</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// stores the background color of the bitmap
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">colorCode</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// stores what color code we are using | 0 for black and white (BW), 1 for green and black (GB), and 2 for other color (OC)
</span><span class="sc0">
</span><span class="sc1">/* 
    @summary    Tests if a number is prime or not
    
    @param      The number to test
    @return     Returns if the number is a prime or not
 */</span><span class="sc0">
</span><span class="sc16">bool</span><span class="sc0"> </span><span class="sc11">testForPrime</span><span class="sc10">(</span><span class="sc16">const</span><span class="sc0"> </span><span class="sc11">ull</span><span class="sc0"> </span><span class="sc11">num</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc11">ull</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc11">num</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc10">++</span><span class="sc11">i</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc2">// goes through all numbers less than half of the number to test
</span><span class="sc0">        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">num</span><span class="sc0"> </span><span class="sc10">%</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc2">// tests to see if its divisible
</span><span class="sc0">            </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// number is divisible, number is not a prime
</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// number is not divisible by any number, it is a prime
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* 
    @summary    Looks for primes. This is used as a multithreaded
                function. Pulls a last number tested and adds 1, then puts
                it back in to the array. This way the next threads knows
                that that number has been tested (or being tested). Then the
                function takes the number and tests if it is a prime or not.
                If the number is a prime, it sets its corisponding foundPrimes
                variable to true and increments numOfPrimes.
                
    @param      The thread ID (this ID is local and not the ID that the Operating system assigns)
    @return     VOID
 */</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">lookForPrimes</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">while</span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// continue to run until we have run through all the numbers
</span><span class="sc0">        </span><span class="sc11">testing</span><span class="sc10">.</span><span class="sc11">lock</span><span class="sc10">();</span><span class="sc0">                                     </span><span class="sc2">// lock the mutex to pull number
</span><span class="sc0">        </span><span class="sc11">ull</span><span class="sc0"> </span><span class="sc11">num</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">testedPrimes</span><span class="sc10">.</span><span class="sc11">back</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">                  </span><span class="sc2">// get number then add one
</span><span class="sc0">        </span><span class="sc11">testedPrimes</span><span class="sc10">.</span><span class="sc11">push_back</span><span class="sc10">(</span><span class="sc11">num</span><span class="sc10">);</span><span class="sc0">                        </span><span class="sc2">// take new number and put it back so the next thread can get a new number
</span><span class="sc0">        </span><span class="sc11">testing</span><span class="sc10">.</span><span class="sc11">unlock</span><span class="sc10">();</span><span class="sc0">                                   </span><span class="sc2">// unlock mutex
</span><span class="sc0">        
        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">num</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">END</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc2">// tests to see if we have run through all the numbers
</span><span class="sc0">            </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
        
        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">testForPrime</span><span class="sc10">(</span><span class="sc11">num</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// tests if number is a prime if it is...
</span><span class="sc0">            </span><span class="sc11">found</span><span class="sc10">.</span><span class="sc11">lock</span><span class="sc10">();</span><span class="sc0">               </span><span class="sc2">// lock mutex to update number is prime
</span><span class="sc0">            </span><span class="sc11">foundPrimes</span><span class="sc10">[</span><span class="sc11">num</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">    </span><span class="sc2">// update at the index that it is a prime
</span><span class="sc0">            </span><span class="sc11">numOfPrimes</span><span class="sc10">++;</span><span class="sc0">              </span><span class="sc2">// update number of found primes
</span><span class="sc0">            </span><span class="sc11">found</span><span class="sc10">.</span><span class="sc11">unlock</span><span class="sc10">();</span><span class="sc0">             </span><span class="sc2">// unlock mutex
</span><span class="sc0">        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* 
    @summary    Displays all the numbers from START to END and displays if it is a prime or not
    
    @param      VOID
    @return     VOID
 */</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">displayPrimes</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">cout</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">foundPrimes</span><span class="sc10">.</span><span class="sc11">size</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc10">++</span><span class="sc11">i</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">": "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">foundPrimes</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* 
    @summary    Creates a bit map with the prime data
    
    @param      VOID
    @return     A string variable holding the location of the outputted bitmap
 */</span><span class="sc0">
</span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">createBitMap</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">FILE</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">f</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">file</span><span class="sc10">[</span><span class="sc4">14</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// BITMAPFILEHEADER
</span><span class="sc0">        </span><span class="sc7">'B'</span><span class="sc10">,</span><span class="sc7">'M'</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// magic                - bfType
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// size in bytes        - bfSize
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">            </span><span class="sc2">// app data             - bfReserved1
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">            </span><span class="sc2">// app data             - bfReserved2
</span><span class="sc0">        </span><span class="sc4">40</span><span class="sc10">+</span><span class="sc4">14</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc0">     </span><span class="sc2">// start of data offset - bfOffBits
</span><span class="sc0">    </span><span class="sc10">};</span><span class="sc0">
    </span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc4">40</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// BITMAPINFOHEADER
</span><span class="sc0">        </span><span class="sc4">40</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">       </span><span class="sc2">// info hd size         - biSize
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// width                - biWidth
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// heigth               - biHeight
</span><span class="sc0">        </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">            </span><span class="sc2">// number color planes  - biPlanes
</span><span class="sc0">        </span><span class="sc4">24</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">           </span><span class="sc2">// bits per pixel       - biBitCount
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// compression is none  - biCompression
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// image bits size      - biSizeImage
</span><span class="sc0">        </span><span class="sc4">0x13</span><span class="sc10">,</span><span class="sc4">0x0B</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">  </span><span class="sc2">// horz resoluition     - biXPelsPerMeter (in pixel / m)
</span><span class="sc0">        </span><span class="sc4">0x13</span><span class="sc10">,</span><span class="sc4">0x0B</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">  </span><span class="sc2">// vert resolutions     - biYPelsPerMeter (0x03C3 = 96 dpi, 0x0B13 = 72 dpi)
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// #colors in pallete   - biClrUsed
</span><span class="sc0">        </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0">        </span><span class="sc2">// #important colors    - biClrImportant
</span><span class="sc0">    </span><span class="sc10">};</span><span class="sc0">

    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">sqrt</span><span class="sc10">(</span><span class="sc11">END</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// get width
</span><span class="sc0">    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">h</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">sqrt</span><span class="sc10">(</span><span class="sc11">END</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// get height
</span><span class="sc0">
    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">padSize</span><span class="sc0">  </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">4</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">%</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">%</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// calculate pad size
</span><span class="sc0">    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">sizeData</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">h</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">h</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">padSize</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">sizeAll</span><span class="sc0">  </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">sizeData</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc5">sizeof</span><span class="sc10">(</span><span class="sc11">file</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc5">sizeof</span><span class="sc10">(</span><span class="sc11">info</span><span class="sc10">);</span><span class="sc0">
    
    </span><span class="sc2">// Set the size up (bfSize)
</span><span class="sc0">    </span><span class="sc11">file</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeAll</span><span class="sc0">      </span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">file</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeAll</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0">  </span><span class="sc4">8</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">file</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeAll</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">16</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">file</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeAll</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">24</span><span class="sc10">);</span><span class="sc0">
    
    </span><span class="sc2">// Set the width up (biWidth)
</span><span class="sc0">    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">w</span><span class="sc0">      </span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0">  </span><span class="sc4">8</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">6</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">16</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">7</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">24</span><span class="sc10">);</span><span class="sc0">
    
    </span><span class="sc2">// Set the height up (biHeight)
</span><span class="sc0">    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">h</span><span class="sc0">      </span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">9</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">h</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0">  </span><span class="sc4">8</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc4">10</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">h</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">16</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc4">11</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">h</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">24</span><span class="sc10">);</span><span class="sc0">
    
    </span><span class="sc2">// Set the size of the file up (biSizeImage)
</span><span class="sc0">    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc4">20</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeData</span><span class="sc0">      </span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc4">21</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeData</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0">  </span><span class="sc4">8</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc4">22</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeData</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">16</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">info</span><span class="sc10">[</span><span class="sc4">23</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">)(</span><span class="sc11">sizeData</span><span class="sc0"> </span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc4">24</span><span class="sc10">);</span><span class="sc0">
    
    </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">name</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">stringstream</span><span class="sc0"> </span><span class="sc11">ss</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">ss</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">".\\bmp\\"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" x "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc10">((</span><span class="sc11">colorCode</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)?</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">colorCode</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)?</span><span class="sc0"> </span><span class="sc6">" GB"</span><span class="sc10">:</span><span class="sc6">" OC"</span><span class="sc10">:</span><span class="sc6">" BW"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc6">".bmp"</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// name of the file
</span><span class="sc0">    </span><span class="sc11">name</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">ss</span><span class="sc10">.</span><span class="sc11">str</span><span class="sc10">();</span><span class="sc0">
    
    </span><span class="sc11">ss</span><span class="sc10">.</span><span class="sc11">str</span><span class="sc10">(</span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">string</span><span class="sc10">());</span><span class="sc0"> </span><span class="sc2">// reset string stream
</span><span class="sc0">    </span><span class="sc11">ss</span><span class="sc10">.</span><span class="sc11">clear</span><span class="sc10">();</span><span class="sc0">
    
    </span><span class="sc11">f</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">fopen</span><span class="sc10">(</span><span class="sc11">name</span><span class="sc10">.</span><span class="sc11">c_str</span><span class="sc10">(),</span><span class="sc0"> </span><span class="sc6">"wb"</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// open file
</span><span class="sc0">    </span><span class="sc11">fwrite</span><span class="sc10">(</span><span class="sc11">file</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">14</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">f</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// write file header
</span><span class="sc0">    </span><span class="sc11">fwrite</span><span class="sc10">(</span><span class="sc11">info</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">40</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">f</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// wite info header
</span><span class="sc0">    
    </span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">pad</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">};</span><span class="sc0">

    </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">h</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">--)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">++)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc16">long</span><span class="sc0"> </span><span class="sc11">red</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">foundPrimes</span><span class="sc10">[</span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">])?</span><span class="sc0"> </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]:</span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0">   </span><span class="sc2">// set red hue
</span><span class="sc0">            </span><span class="sc16">long</span><span class="sc0"> </span><span class="sc11">green</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">foundPrimes</span><span class="sc10">[</span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">])?</span><span class="sc0"> </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]:</span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">];</span><span class="sc0"> </span><span class="sc2">// set green hue
</span><span class="sc0">            </span><span class="sc16">long</span><span class="sc0"> </span><span class="sc11">blue</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">foundPrimes</span><span class="sc10">[</span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">])?</span><span class="sc0"> </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]:</span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">];</span><span class="sc0">  </span><span class="sc2">// set blue hue
</span><span class="sc0">            
            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">red</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">red</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">           </span><span class="sc2">// make sure that ll the values are withing acceptable limits
</span><span class="sc0">            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">red</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">255</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">red</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">255</span><span class="sc10">;</span><span class="sc0">
            
            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">green</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">green</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">green</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">255</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">green</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">255</span><span class="sc10">;</span><span class="sc0">
            
            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">blue</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">blue</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">blue</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">255</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">blue</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">255</span><span class="sc10">;</span><span class="sc0">
            
            </span><span class="sc16">unsigned</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">pixel</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">];</span><span class="sc0"> </span><span class="sc2">// create pixel
</span><span class="sc0">            </span><span class="sc11">pixel</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">blue</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">pixel</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">green</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">pixel</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">red</span><span class="sc10">;</span><span class="sc0">

            </span><span class="sc11">fwrite</span><span class="sc10">((</span><span class="sc16">char</span><span class="sc10">*)</span><span class="sc11">pixel</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">f</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// write pixel
</span><span class="sc0">        </span><span class="sc10">}</span><span class="sc0">
        </span><span class="sc11">fwrite</span><span class="sc10">((</span><span class="sc16">char</span><span class="sc10">*)</span><span class="sc11">pad</span><span class="sc10">,</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">padSize</span><span class="sc10">,</span><span class="sc11">f</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// write padding
</span><span class="sc0">    </span><span class="sc10">}</span><span class="sc0">
    
    </span><span class="sc11">fclose</span><span class="sc10">(</span><span class="sc11">f</span><span class="sc10">);</span><span class="sc0">
    
    </span><span class="sc11">ss</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\""</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">name</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\""</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// fet full file name in quotes
</span><span class="sc0">    </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">fullFile</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">ss</span><span class="sc10">.</span><span class="sc11">str</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">fullFile</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// return file name in quotes
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* 
    @summary    Displays the help text
    
    @param      VOID
    @return     VOID
 */</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">helpText</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">cout</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"Prime Map is a program that outputs a bitmap that shows all the primes"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"HELP:\n"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"Argument\tDefault\t\tDetails"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"-t \t\t"</span><span class="sc0">       </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc0">                                </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\t\tUse this argument to specify number of threads\n"</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"-e \t\t"</span><span class="sc0">       </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">10000</span><span class="sc0">                            </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\t\tUse this argument to specify the maximum number\n"</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"-o \t\t"</span><span class="sc0">       </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"False"</span><span class="sc0">                          </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\t\tUse this switch to specify whether to output a bitmap\n"</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"-d \t\t"</span><span class="sc0">       </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"False"</span><span class="sc0">                          </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\t\tUse this switch to specify whether to display the bitmap\n"</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"-gbc \t\t"</span><span class="sc0">     </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"No Default"</span><span class="sc0">                     </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\tUse this switch to use green on black color scheme\n"</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"-p \t\t"</span><span class="sc0">       </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc0">   </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc0">   </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc0">    </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\t\tUse this argument to specify prime color on the bitmap (RGB format)\n"</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"-b \t\t"</span><span class="sc0">       </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">254</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">254</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc4">254</span><span class="sc0">  </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\tUse this argument to specify background color on the bitmap (RGB format)\n"</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"Usage:   .\\PrimeMap.exe [-t &lt;threads&gt;] [-e &lt;end&gt;] [-o] [-d] [[-gbc] | [-p &lt;R&gt; &lt;G&gt; &lt;B&gt;] [-b &lt;R&gt; &lt;G&gt; &lt;B&gt;]]"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"Example: .\\PrimeMap.exe -t 7 -e 500000 -o -d -gbc"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"Example: .\\PrimeMap.exe -t 7 -e 500000 -o -p 1 1 1 -d 245 12 155"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
    
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
         
    </span><span class="sc11">exit</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* 
    @summary    Parses the command line arguments
    
    @param      An int containing the amount of arguments
                supplied, and a char array holding the actuall
                command line arguments
    @return     VOID
 */</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">parse</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">argc</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">argv</span><span class="sc10">[])</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">argc</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc10">++</span><span class="sc11">i</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc5">if</span><span class="sc0">       </span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc6">"-t"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// number of threads to use
</span><span class="sc0">            </span><span class="sc11">NUM_OF_THREADS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atoi</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">i</span><span class="sc10">++;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"-e"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// number of primes to find up to
</span><span class="sc0">            </span><span class="sc11">END</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atoll</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">i</span><span class="sc10">++;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"-p"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// prime color RGB
</span><span class="sc0">            </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atol</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atol</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atol</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">colorCode</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"-b"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// background color RGB
</span><span class="sc0">            </span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atol</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atol</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">atol</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">]);</span><span class="sc0">
            </span><span class="sc11">colorCode</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"-gbc"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// shortcut to Green on Black
</span><span class="sc0">            </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">70</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">192</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">primeColor</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">22</span><span class="sc10">;</span><span class="sc0">
            
            </span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">nonPColor</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">colorCode</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"-o"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// output a bitmap
</span><span class="sc0">            </span><span class="sc11">outputBitMap</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"-d"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// display/open the bitmap
</span><span class="sc0">            </span><span class="sc11">display</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"/?"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">argv</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc6">"-?"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc2">// display the help text
</span><span class="sc0">            </span><span class="sc11">helpText</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc2">// somthing wrong happened, display help text
</span><span class="sc0">            </span><span class="sc11">helpText</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* 
    @summary    MAIN
    
    @param      Command line arguments
    @return     exit code
 */</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">argc</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">argv</span><span class="sc10">[])</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">_PRINTINFO</span><span class="sc10">;</span><span class="sc0">
    
    </span><span class="sc5">using</span><span class="sc0"> </span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">chrono</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// used for timing run
</span><span class="sc0">    </span><span class="sc5">using</span><span class="sc0"> </span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">;</span><span class="sc0">
    
    </span><span class="sc11">parse</span><span class="sc10">(</span><span class="sc11">argc</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">argv</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// get parse info
</span><span class="sc0">    
    </span><span class="sc11">vector</span><span class="sc10">&lt;</span><span class="sc11">thread</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">threads</span><span class="sc10">;</span><span class="sc0">
    
    </span><span class="sc11">threads</span><span class="sc10">.</span><span class="sc11">reserve</span><span class="sc10">(</span><span class="sc11">NUM_OF_THREADS</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">foundPrimes</span><span class="sc10">.</span><span class="sc11">reserve</span><span class="sc10">(</span><span class="sc11">END</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">100</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// reserve vector memory for faster storage
</span><span class="sc0">    
    </span><span class="sc16">auto</span><span class="sc0"> </span><span class="sc11">startTime</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">steady_clock</span><span class="sc10">::</span><span class="sc11">now</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc2">// start clock to time the run
</span><span class="sc0">    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">NUM_OF_THREADS</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc10">++</span><span class="sc11">i</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc2">// run each thread
</span><span class="sc0">        </span><span class="sc11">threads</span><span class="sc10">.</span><span class="sc11">push_back</span><span class="sc10">(</span><span class="sc11">thread</span><span class="sc10">(</span><span class="sc11">lookForPrimes</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">));</span><span class="sc0">
    
    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">auto</span><span class="sc10">&amp;</span><span class="sc0"> </span><span class="sc11">t</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">threads</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">t</span><span class="sc10">.</span><span class="sc11">join</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc2">// wait for the other threads to finish
</span><span class="sc0">    
    </span><span class="sc16">auto</span><span class="sc0"> </span><span class="sc11">endTime</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">steady_clock</span><span class="sc10">::</span><span class="sc11">now</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc2">// stop the timer
</span><span class="sc0">    </span><span class="sc16">auto</span><span class="sc0"> </span><span class="sc11">diff</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">endTime</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">startTime</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// get time
</span><span class="sc0">    </span><span class="sc16">auto</span><span class="sc0"> </span><span class="sc11">nseconds</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc10">(</span><span class="sc11">diff</span><span class="sc10">.</span><span class="sc11">count</span><span class="sc10">())</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">steady_clock</span><span class="sc10">::</span><span class="sc11">period</span><span class="sc10">::</span><span class="sc11">num</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">steady_clock</span><span class="sc10">::</span><span class="sc11">period</span><span class="sc10">::</span><span class="sc11">den</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// convert to seconds
</span><span class="sc0">    
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">numOfPrimes</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" primes found between "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">START</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" and "</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">END</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" using "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">NUM_OF_THREADS</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" cores in "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">nseconds</span><span class="sc0">
         </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" seconds."</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">                                    </span><span class="sc2">// display run dignostics
</span><span class="sc0">    
    </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">outputBitMap</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc2">// run this if we want to output a bitmap
</span><span class="sc0">        </span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">file</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">createBitMap</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc2">// create bitmap and get the file URL
</span><span class="sc0">        </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\nCreated Bitmap: "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">file</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">display</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc2">// run if we want to open the file
</span><span class="sc0">            </span><span class="sc11">system</span><span class="sc10">(</span><span class="sc11">file</span><span class="sc10">.</span><span class="sc11">c_str</span><span class="sc10">());</span><span class="sc0"> </span><span class="sc2">// display the file
</span><span class="sc0">    </span><span class="sc10">}</span><span class="sc0">
    
    </span><span class="sc11">std</span><span class="sc10">::</span><span class="sc11">cin</span><span class="sc10">.</span><span class="sc11">get</span><span class="sc10">();</span><span class="sc0">
    
    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// SUCCESS
</span><span class="sc10">}</span></div></body>
</html>
